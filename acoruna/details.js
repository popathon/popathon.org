/*!Denis Sokolov, http://akral.github.io/details-tag/, denis@sokolov.cc. GPL, MIT */
!function(a){var c,b="open"in document.createElement("details");a.fn.details=function(d){if("open"===d&&(b?this.prop("open",!0):this.trigger("open")),"close"===d&&(b?this.prop("open",!1):this.trigger("close")),"init"===d&&c(a(this)),!d){if(!b)return this.hasClass("open");var e=!1;return this.each(function(){return this.open?(e=!0,!1):void 0}),e}},c=function(c){c=c.not(".details-inited").addClass("details-inited"),c.filter(".animated").each(function(){var b=a(this),c=b.children("summary").remove(),d=a("<div>").addClass("details-wrapper").append(b.children());b.append(d).prepend(c)}),b||(c.each(function(){var b=a(this);b.children("summary").length||b.prepend("<summary>Details</summary>")}).children("summary").filter(":not(tabindex)").attr("tabindex",0).end().end().contents(":not(summary)").filter(function(){return 3===this.nodeType&&/[^\t\n\r ]/.test(this.data)}).wrap("<span>").end().end().filter(":not([open])").prop("open",!1).end().filter("[open]").addClass("open").prop("open",!0).end(),c.filter(":not(.open)").children().not("summary").hide())},a(function(){return a("body").on("open.details","details.animated",function(){var b=a(this),c=b.children(".details-wrapper");c.hide(),setTimeout(function(){c.slideDown(b.data("animation-speed"))},0)}).on("close.details","details.animated",function(){var b=a(this),c=b.children(".details-wrapper");setTimeout(function(){b.prop("open",!0).addClass("open"),c.slideUp(b.data("animation-speed"),function(){b.prop("open",!1).removeClass("open")})},0)}),b?void a("body").on("click","summary",function(){var b=a(this).parent();setTimeout(function(){b.prop("open")?b.trigger("close"):b.trigger("open")},0)}):(a("html").addClass("no-details"),a("body").on("open.details","details",function(b){a(this).addClass("open").trigger("change.details"),b.preventDefault(),b.stopPropagation()}).on("close.details","details",function(b){a(this).removeClass("open").trigger("change.details"),b.preventDefault(),b.stopPropagation()}).on("toggle.details","details",function(b){var c=a(this);c.hasClass("open")?c.trigger("close"):c.trigger("open"),b.stopPropagation()}).on("click","summary",function(){a(this).parent().trigger("toggle")}).on("keyup","summary",function(b){(32===b.keyCode||13===b.keyCode)&&a(this).parent().trigger("toggle")}),a("body").on("open.details","details",function(){a(this).children().not("summary").show()}).on("close.details","details",function(){a(this).children().not("summary").hide()}),void c(a("details")))})}(jQuery);